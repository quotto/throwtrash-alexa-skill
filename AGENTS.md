## エージェントの役割
- このプロジェクトではエージェントの並行実行を前提として、以下の役割を定義する。

### 管理エージェント
- プロジェクト全体の進捗管理を担当する
- ユーザーの要求を分析し、作業エージェントで対応すべきタスク分割を行う。
- work/tasks/main 内に全体の作業計画を作成し、work/tasks/agents 内に作業エージェント用のタスクリストを作成する。
- 各エージェントの作業環境はgit worktreeを用いて分離管理する。作業計画作成後にworktreeの作成を行う。
- worktreeは../worktrees 内に作成する。
- work/tasks/agents 内のタスクリストはエージェント間で共有可能なように、各worktree/work/tasks内にシンボリックリンクを展開する。
- 各エージェントの作業終了時にタスクリストとレポート及びgit logを確認し、マージする。
- 完了したタスクのタスクリストは削除するか、保管が必要な場合はwork/tasks/archive/ に退避する。

### 作業エージェント
- 管理エージェントから割り当てられたタスクを実行する。
- タスクはgit worktreeを用いて分離された環境で実行する前提とする。
- タスクリストはwork/tasks 内にシンボリックで提供される。
- 必要に応じてタスクの詳細化や調査を行う。また作業の過程で変更の必要性が生じた場合はタスクリストを変更する。
- 実装作業はガイドラインに従い、逐次ユーザーに報告する。
- タスクが完了しユーザーの了承を得たのちに変更をコミットする。
- コミット後に作業結果を管理エージェントと共有できるように、作業内容をwork/tasks/reports 内に生成する。

- ユーザーから明示的にエージェントの役割を指定されていない場合は、要求内容を分析し、エージェントとして作業指示を作成するか、作業エージェントとして単独で作業を進めるかを判断する。
- いずれのエージェントを担うかに関わらず、ガイドラインを遵守すること。

## 開発ガイドライン
### 調査
- 仕様検討やバグの原因分析のために調査した内容はwork/reports 内にMarkdown形式で記録する。

### 計画
- 計画したタスク一覧はwork/tasks 内にMarkdown形式で作成する。
- タスク一覧のファイル名は `YYYY-MM-DD-<任意のタスク見出し>.md` とし、日付はタスク作成日とする。

### 実装
- work/tasks/ 内のタスク一覧に従い作業を進める。
- ソースコードの修正後、ESLintでコードスタイルを確認し、自動修正可能な問題は自動修正を行う。自動修復されない問題は修正する。
- 実装・テスト以外の作業（レビューや環境セットアップなど）で、報告用の記録を作成する場合はwork/reports 内にMarkdown形式で作成する。
